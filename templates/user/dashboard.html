{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>User Dashboard</h3>

    <a href="{% url 'create_complaint' %}" class="btn btn-success">
      âž• Raise New Complaint
    </a>
  </div>

  <!-- Complaints Card -->
  <div class="card shadow-sm">
    <div class="card-header">
      <strong>My Complaints ({{ complaints|length }})</strong>
    </div>

    <ul class="list-group list-group-flush">
      {% for c in complaints %}
        <li class="list-group-item">
          <div class="d-flex justify-content-between">
            <strong>{{ c.title }}</strong>

            {% if c.status == 'PENDING' %}
              <span class="badge bg-warning">{{ c.status }}</span>
            {% elif c.status == 'RESOLVED' %}
              <span class="badge bg-success">{{ c.status }}</span>
            {% else %}
              <span class="badge bg-info">{{ c.status }}</span>
            {% endif %}
          </div>

          {% if c.description %}
            <p class="text-muted mb-1 mt-1">
              {{ c.description|truncatechars:120 }}
            </p>
          {% endif %}

          <small class="text-muted">
            Created on {{ c.created_at|date:"M d, Y H:i" }}
          </small>
        </li>

      {% empty %}
        <li class="list-group-item text-center text-muted py-4">
          ðŸš« You havenâ€™t raised any complaints yet.
        </li>
      {% endfor %}
    </ul>
  </div>

</div>
{% endblock %}
